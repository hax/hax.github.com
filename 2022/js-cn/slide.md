ä¸­å›½å¦‚ä½•å‚ä¸JSè¯­è¨€æ ‡å‡†ï¼Ÿ

GitHub @hax
çŸ¥ä¹ è´ºå¸ˆä¿Š
Bç«™ è´ºå¸ˆä¿Š
Matrix @haxjs

å…³äºæˆ‘

1998å¹´,
å¼€å§‹å†™ä»£ç 
<!-- æ—©äºæœ‰ã€ŒWebå‰ç«¯ã€ -->

Webå‰ç«¯å’ŒJSè¯­è¨€
20å¤šå¹´å‘å±•å†ç¨‹
è§è¯äººå’Œå‚ä¸è€…

- ç››å¤§åˆ›æ–°é™¢
- ç™¾å§“ç½‘
- 360å¥‡èˆå›¢

2019å¹´6æœˆ~2021å¹´4æœˆ
360é›†å›¢ TC39ä»£è¡¨
2021å¹´4æœˆèµ· ç‰¹é‚€ä¸“å®¶

ä¸­å›½å¦‚ä½•å‚ä¸JSè¯­è¨€æ ‡å‡†ï¼Ÿ

JS

JavaScript
ç¼–ç¨‹è¯­è¨€

ç›®å‰å…¨ä¸–ç•Œæœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€
1600ä¸‡+ å¼€å‘è€…
ï¼ˆSlashdata 2021å¹´Q3ç»Ÿè®¡ï¼‰

Brendan Eich
1995å¹´çš„10å¤©
Netscape 2

<!-- ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒ -->
Webæ ‡å‡†
ç«äº‰å‹åŠ›
<!-- æµè§ˆå™¨å¤§æˆ˜ å¾®è½¯ -->

<!-- å°½ç®¡å¹¶ä¸ç¨³å®š -->
äº’è”ç½‘è„šæœ¬è¯­è¨€
äº‹å®æ ‡å‡†

1996 æ ‡å‡†åŒ–

Ecmaå›½é™…
<!-- ECMA => Ecmaå›½é™… -->

ECMAScript
<!-- JavaScriptå•†æ ‡ -->

TC39

1996å¹´11æœˆ
ECMA-262

- 1997å¹´6æœˆ ES1
- 1998å¹´6æœˆ ES2
- 1999å¹´12æœˆ ES3
- 2009å¹´12æœˆ ES5
- 2015å¹´6æœˆ ES6

- 2015å¹´6æœˆ ES2015ï¼ˆES6ï¼‰
- 2016å¹´6æœˆ ES2016ï¼ˆES7ï¼‰
- â€¦â€¦
- 2021å¹´6æœˆ ES2021ï¼ˆES12ï¼‰
- 2022å¹´6æœˆ ES2022ï¼ˆES13ï¼‰

ä¸­å›½å…¬å¸å’Œç¤¾åŒºï¼Ÿ

æˆ‘ä¸ªäºº

2006 å¼€å§‹å‚ä¸ï¼ˆé‚®ä»¶åˆ—è¡¨ï¼‰
2016 æ—¥å¸¸å‚ä¸ï¼ˆGitHubï¼‰
2017å¹´ä¸­ å‘ç°é—®é¢˜
2018å¹´åº• æ¸¸è¯´ä¸­å›½ç§‘æŠ€å…¬å¸

é˜¿é‡Œã€è…¾è®¯ã€ç¾å›¢
æ…§ç§‘ã€å­—èŠ‚ã€360

æ€è€ƒï¼šä¸ºä»€ä¹ˆä¼ä¸šè¦å‚ä¸JSæ ‡å‡†ï¼Ÿ

ã€Œå¼€æ”¾ã€æ ‡å‡†ï¼Ÿ
ä»¥å…¬å¸ã€ç»„ç»‡ä¸ºå•ä½

ä¸ªäººèº«ä»½å‚ä¸çš„é—®é¢˜

ä¸“ä¸šåº¦ã€ä»£è¡¨æ€§
é›¶æ•£ã€åˆ†æ­§ã€è¢«åŠ¨

åªèƒ½ æä¾›åé¦ˆ
æ— æ³• ä¸»å¯¼è®¾è®¡

ç»„ç»‡æŠ€æœ¯æˆ˜ç•¥
ä¸ªäººä¸“ä¸šèƒ½åŠ›
<!-- ç»“åˆ -->

æœˆå½±ï¼ˆæ—¶ä»»360å¥‡èˆå›¢å›¢é•¿ï¼‰æ¨åŠ¨
ç©†é¸¿ï¼ˆæ—¶ä»»360é›†å›¢å‰¯æ€»è£ï¼‰æ‹æ¿

2019å¹´6æœˆ 360é›†å›¢
æˆä¸ºEcmaå›½é™…ä¼šå‘˜
å¹¶åŠ å…¥TC39å·¥ä½œç»„

2019å¹´12æœˆ
- é˜¿é‡Œå·´å·´
- åä¸º
- SujiTech

2020å¹´6æœˆ è…¾è®¯
2021å¹´6æœˆ å­—èŠ‚

æ–°ææ¡ˆçš„æµç¨‹
ä»¥åŠå·¥ä½œæ–¹å¼

- Stage 1ï¼šé—®é¢˜åŸŸã€ç”¨ä¾‹ï¼Œå¤§è‡´çš„è§£å†³æ–¹æ¡ˆ
- Stage 2ï¼šè¯­ä¹‰è¯­æ³•ã€APIé½å¤‡ï¼Œæ­£å¼çš„è§„èŒƒæ–‡æœ¬
- Stage 3ï¼šå®Œæ•´ç²¾ç¡®çš„è¯­ä¹‰è¯­æ³•ã€APIï¼Œç­‰å¾…å®ç°
- Stage 4ï¼šTest262æµ‹è¯•é›†ã€è‡³å°‘ä¸¤ä¸ªå®ç°

- GitHub Repoï¼ˆé€šè¿‡å…¬å¼€ä»“åº“å·¥ä½œå’Œè®¨è®ºï¼‰
- æ¯2ä¸ªæœˆä¸€æ¬¡TC39å…¨ä½“å¤§ä¼šï¼ˆé—­é—¨ä¼šè®®ï¼‰
- é‡‡ç”¨å…±è¯†æœºåˆ¶ï¼ˆä¸€ç¥¨å¦å†³ï¼‰
- å…¶ä»–è¾…åŠ©æ€§ä¼šè®®ï¼ˆå­µåŒ–ä¼šè®®ã€champion groupä¼šè®®ç­‰ï¼‰

ç”±ä¸­å›½ä»£è¡¨æ‹…ä»»championçš„ææ¡ˆä¸€è§ˆ

- Error cause (Stage 4)
- `Array.prototype.findLast`/`findLastIndex` (Stage 3)
- `function.sent` meta property (Stage 2)
- Double-ended iterators (Stage 1)
- Class branding checks (Stage 1)
- Extensions and `::` operator (Stage 1)
- Limited ArrayBuffer (Stage 1)
- Number Range (Stage 1)

- Pattern match (Stage 1)
- `Array.prototype.unique()` (Stage 1)
- await operations (Stage 1)
- Legacy reflection features for functions (Stage 1)
- Async context (Stage 0)
- String trim characters (Stage 0)
- Index from end syntax (Stage 0)
- function explicit `this` parameter (Stage 0)

æ¡ˆä¾‹1ï¼š`findLast`/`findLastIndex` (Stage 3)
å¾®è½¯ä¸­å›½ ç‹æ–‡ç’ï¼ˆ@Kingwlï¼‰

è¯†åˆ«é—®é¢˜

```js
const array = [{ value: 1 }, { value: 2 }, { value: 3 }, { value: 4 }];
array.find(n => n.value % 2 === 1); // { value: 1 }
array.findIndex(n => n.value % 2 === 1); // 0
// find
[...array].reverse().find(n => n.value % 2 === 1); // { value: 3 }
// findIndex
array.length - 1 - [...array].reverse().findIndex(n => n.value % 2 === 1); // 2
array.length - 1 - [...array].reverse().findIndex(n => n.value === 42); // should be -1, but 4
```

è§£å†³æ–¹æ¡ˆ

```js
// find
array.findLast(n => n.value % 2 === 1); // { value: 3 }
// findIndex
array.findLastIndex(n => n.value % 2 === 1); // 2
array.findLastIndex(n => n.value === 42); // -1
```

- 2021å¹´1æœˆè¿›å…¥Stage 1
- 2021å¹´3æœˆè¿›å…¥Stage 2
- 2021å¹´7æœˆè¾¾åˆ°Stage 3
- 2022å¹´?æœˆè¾¾åˆ°Stage 4

Issues

- åŠ¨æœºå’Œåœºæ™¯ #14
- å‘½å #1 #9 #13
- å…¶ä»–ææ¡ˆï¼ˆ`forEachRight`ã€`findNth(n, pred)`ï¼‰ #11 #46
- TypedArray #5 #32
- `Array.prototype[@@unscopables]` #30

åŠ¨æœºå’Œåœºæ™¯ï¼ˆçµé­‚ä¹‹é—®ï¼‰
ä¸ºä»€ä¹ˆç”¨åº“ä¸è¡Œï¼Ÿ

Barï¼ˆé—¨æ§›ï¼‰
åˆ°åº•æœ‰å¤šé«˜ï¼Ÿ

- `padStart`/`padEnd`/`trimStart`/`trimEnd`
- Performance
- åº“è¢«å¼•ç”¨çš„é¢‘ç¹ç¨‹åº¦
- APIçš„å®Œæ•´æ€§

- lodash.findlast 30k+/w
- lodash.findlastindex 10k+/w
- lodash.nth 1k+/w (`Array.p.at` stage 3)

è®¡ç§‘ä¸¤å¤§éš¾
å‘½åä¸ç¼“å­˜

- findRight/findIndexRight
- findEnd/findIndexEnd
- findLast/findIndexLast
- findLast/findLastIndex

- `***Right`: `reduce`/`reduceRight`, `trimLeft`/`trimRight`
- `***End`: `padStart`/`padEnd`, `trimStart`/`trimEnd`
- `***Last`: `lastIndexOf`

æ¡ˆä¾‹ç»éªŒ

- APIæ‹¾é—è¡¥ç¼ºæ˜¯ä¸€ä¸ªå¥½çš„å¼€å§‹
- ä¸¥å®ˆï¼ˆç¼©å°ï¼‰scope
- é€‚æ—¶çš„æ¨ªå‘å¯¹æ¯”
- é‡è§†ç»†èŠ‚ï¼ˆæ¯”å¦‚å‘½åï¼‰

æ¡ˆä¾‹2ï¼šError cause (ES2022)
é˜¿é‡Œå·´å·´ å´æˆå¿ ï¼ˆ@legendecasï¼‰

è¯†åˆ«é—®é¢˜

```js
async function doJob() {
  const rawResource = await fetch('//domain/resource-a')
    .catch(err => {
      // How to wrap the error properly?
      // 1. throw new Error('Download raw resource failed: ' + err.message);
      // 2. const wrapErr = new Error('Download raw resource failed');
      //    wrapErr.cause = err;
      //    throw wrapErr;
      // 3. class CustomError extends Error {
      //      constructor(msg, cause) {
      //        super(msg);
      //        this.cause = cause;
      //      }
      //    }
      //    throw new CustomError('Download raw resource failed', err);
    })
  const jobResult = doComputationalHeavyJob(rawResource);
  await fetch('//domain/upload', { method: 'POST', body: jobResult });
}
await doJob(); // => TypeError: Failed to fetch
```

- ä¸ç›´æ¥æš´éœ²ä½å±‚æ“ä½œçš„é”™è¯¯
- é“¾å¼é”™è¯¯æ¨¡å¼ï¼šæ¯ä¸ªå±‚æ¬¡çš„é”™è¯¯æä¾›åˆé€‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å¹¶åŒ…è£…æ›´ä½å±‚çš„é”™è¯¯
- ç›®å‰ä¸æ˜¯åšä¸åˆ°ï¼Œä½†æ˜¯å¾ˆéº»çƒ¦
- ç¼ºä¹æ ‡å‡†çš„åšæ³•ï¼Œå¯¼è‡´æ—¥å¿—å’Œè°ƒè¯•å·¥å…·æ— æ³•æä¾›å¸®åŠ©

è§£å†³æ–¹æ¡ˆ

```js
async function doJob() {
  const rawResource = await fetch('//domain/resource-a')
    .catch(err => {
      throw new Error('Download raw resource failed', { cause: err });
    });
  const jobResult = doComputationalHeavyJob(rawResource);
  await fetch('//domain/upload', { method: 'POST', body: jobResult })
    .catch(err => {
      throw new Error('Upload job result failed', { cause: err });
    });
}
try {
  await doJob();
} catch (e) {
  console.log(e);
  console.log('Caused by', e.cause);
}
// Error: Upload job result failed
// Caused by TypeError: Failed to fetch
```

- 2020å¹´9æœˆè¿›å…¥Stage 1
- 2020å¹´11æœˆè¿›å…¥Stage 2
- 2021å¹´3æœˆè¾¾åˆ°Stage 3
- 2021å¹´10æœˆè¾¾åˆ°Stage 4

Issues

- ä¸ç°æœ‰æ–¹å¼çš„æ¯”è¾ƒã€å…±å­˜é—®é¢˜ #4 #12 #31ï¼ˆStage 1ï¼‰
- APIå½¢æ€ï¼ˆoption bagï¼‰ã€å…¼å®¹æ€§ #10 #11 #20 #33 #38ï¼ˆStage 2ï¼‰
- `Error.prototype.cause` #5 #24 #35ï¼ˆStage 3ï¼‰
- `toString()`å’Œ`.stack`è¡Œä¸º #14 #16 #22 #41ï¼ˆStage 3ï¼‰
- `cause`çš„ç±»å‹ #21ï¼ˆStage 3ï¼‰
- `cause`ä¸`errors`ï¼ˆ`AggregateError`ï¼‰çš„å…³ç³» #40ï¼ˆStage 3ï¼‰
- è§„èŒƒç»†èŠ‚é—®é¢˜ #28 #36 #37ï¼ˆStage 3ï¼‰

```js
new Error(message, cause)
new Error(message, {cause})
```

- å‘å‰å…¼å®¹æ€§
- å‘åå…¼å®¹æ€§ï¼ˆå¯æ‰©å±•æ€§ï¼‰

```js
// Firefox
new Error(message, filename?, lineNumber?)
// DOM API
new DOMException(message, 'NotSupportedError')
```

```js
// æœªæ¥å¯èƒ½çš„å…¶ä»–ç‰¹æ€§
throw new Error('assertion failed', {kind: TestAssertion})
```

```js
// ç¼ºç‚¹
try {
	...
} catch (e) {
	throw new Error(message, e) // å†™é”™äº†
	// throw new Error(message, {cause: e})
	// ç®€å•çš„ç±»å‹æ£€æŸ¥å¹¶ä¸èƒ½å‘ç°è¿™ä¸ªé”™è¯¯
	// å› ä¸ºeå¦‚æœæ˜¯Errorï¼Œåˆ™å…·æœ‰causeå±æ€§ï¼Œ
	// å’Œ {cause: any} ç±»å‹æ˜¯ç›¸å®¹çš„
}
```

ç‰¹æ®Šæ€§

```js
'message' in Error.prototype // true
Object.hasOwn(new Error(), 'message') // false
Object.hasOwn(new Error(''), 'message') // true
'cause' in Error.prototype // false
Object.hasOwn(new Error('', {}), 'cause') // false
Object.hasOwn(new Error('', {cause: undefined}), 'cause') // true
```

```js
try {
	...
} catch (e) { // ç†è®ºä¸Š e å¯èƒ½æ˜¯ undefined
	throw new Error('fail', {cause: e})
}
// å¤„ç† cause
if ('cause' in e) { ... }
```

æ¡ˆä¾‹ç»éªŒ

- ä»ç”Ÿäº§å®è·µä¸­å‘ç°é—®é¢˜
- ä»å…¶ä»–ç¼–ç¨‹è¯­è¨€å€Ÿé‰´æ–¹æ¡ˆ
- æ‰©å±•APIè¦æ³¨æ„å…¼å®¹æ€§
- æ³¨æ„è·¨ææ¡ˆçš„å…³è”
- æ³¨æ„è¯­ä¹‰çš„æ˜ç¡®
- å­¦ä¹ å¦‚ä½•åšæƒè¡¡ï¼ˆå§”å‘˜ä¼šæ¨¡å¼ï¼‰

æ¡ˆä¾‹3ï¼š`function.thisArgumentExpected`
360 è´ºå¸ˆä¿Šï¼ˆ@haxï¼‰

è¯†åˆ«é—®é¢˜

```js
class Test {
  constructor(name) {
    this.name = name
  }
  showName() {
    console.log(this.name)
  }
}
const hax = new Test('hax')
$(e).on('click', hax.showName) // <- ä¸æŠ¥é”™ï¼Œå®é™…è¾“å‡º window.name
```

```js
Promise.race([
	fetch('result'),
	fetch('negative-result').then(Promise.reject)
])
// è¿™ä»£ç æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºPromise.rejectéœ€è¦ this
// å¿…é¡»æ˜¯Promiseæˆ–å…¶å­ç±»
```

`Promise.reject`çš„ä¾‹å­ç‰¹åˆ«å‘ï¼š
- staticæ–¹æ³•ï¼Œä½†éœ€è¦`this`
- Promise/A+ å¹¶ä¸éœ€è¦
- è¿™ç§é”™è¯¯åªæ˜¯å¶å°”å‘ç”Ÿï¼Œå¾ˆéš¾ç¬¬ä¸€æ—¶é—´å‘ç°
- å‘ç”Ÿäº†ï¼Œä¹Ÿéš¾ä»¥è¾¨è¯†é”™è¯¯çš„æ¥æº

è§£å†³æ–¹æ¡ˆ

```js
ElementWrapper.prototype.on = function (eventType, listener, options) {
  const eventTarget = this.element
  if (listener.thisArgumentExpected) throw new TypeError(
    'listener should not expect this argument, please use arrow function or <function>.bind')
  eventTarget.addEventListener(eventType, listener, options)
}
\
$(window).on('click', hax.showName) // <- throw TypeError
\
$(window).on('click', () => hax.showName()) // <- ok
$(window).on('click', hax.showName.bind(hax)) // <- ok
\
$(window).on('click', test) // <- also ok
function test() { console.log('test') }
```

```js
class MyPromise extends Promise {
  then(onFulfilled, onRejected) {
    if (onFulfilled?.thisArgumentExpected) throw new TypeError()
    if (onRejected?.thisArgumentExpected) throw new TypeError()
    return super.then(onFulfilled, onRejected)
  }
}
```

è¢«æµè§ˆå™¨å‚å•†ä»£è¡¨å¦å†³ğŸ˜­

- Platform API çš„å®ç°æˆæœ¬
- æ¡†æ¶å’Œåº“æ˜¯å¦æ„¿æ„ä½¿ç”¨è¯¥ç‰¹æ€§ï¼ˆé¸¡ç”Ÿè›‹é—®é¢˜ï¼‰
- å·¥å…·ï¼ˆå¦‚ç±»å‹æ£€æŸ¥ï¼‰è‡³å°‘å¯ä»¥ï¼ˆéƒ¨åˆ†ï¼‰è§£å†³é—®é¢˜

æ¡ˆä¾‹ç»éªŒ

- ä¸Šæ¥å°±é€‰äº†ä¸€ä¸ªhardæ¨¡å¼
- è™½ç„¶åšäº†å¾ˆå¤šå‡†å¤‡ï¼Œä½†æ˜¯æ²¡æœ‰å……åˆ†è¯„ä¼°æµè§ˆå™¨å‚å•†ä»£è¡¨çš„ç«‹åœºï¼ˆå±è‚¡ï¼‰
- å‰è½¦ä¹‹é‰´ï¼ˆ`Function.isCallable`/`Function.isConstructor`ï¼‰
- ç†è§£å§”å‘˜ä¼šæ¨¡å¼çš„è¿ä½œæœºåˆ¶

æ¡ˆä¾‹4 åŒç«¯è¿­ä»£å’Œè§£æ„ï¼ˆStage 1ï¼‰
360 è´ºå¸ˆä¿Šï¼ˆ@haxï¼‰

è¯†åˆ«é—®é¢˜

```c
(first, *rest, last) = [1, 2, 3, 4] // Python/Ruby
[first, rest..., last] = [1, 2, 3, 4] // CoffeeScript
[first, rest @ .., last] = [1, 2, 3, 4] // Rust
```

è§£å†³æ–¹æ¡ˆ

```js
let [first, ...rest, last] = [1, 2, 3, 4]
\
string.replace(pattern, (fullMatch, ...submatches, matchIndex, fullString) => {
  // `matchIndex` is always the second to last param (the full string is the last param).
  // There may be many submatch params, depending on the pattern.
})
```

```js
// let [a, b, ..., c, d] = iterable
let iter = iterable[Symbol.iterator]()
let a = iter.next().value
let b = iter.next().value
let d = iter.next('back').value
let c = iter.next('back').value
iter.return()
```

- 2020å¹´9æœˆè¿›å…¥Stage 1
- 2020å¹´12æœˆé€šè¿‡å­µåŒ–ä¼šè®®è®¨è®ºäº†å¤§æ–¹å‘

æ¡ˆä¾‹ç»éªŒ

- ç”±å°é—®é¢˜å…¥æ‰‹
- è€ƒå¯Ÿå†å²
- å€Ÿé‰´å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„æ–¹æ¡ˆ
- åŒæ—¶è§£å†³å…³è”ææ¡ˆçš„é—®é¢˜
- æŠŠé—®é¢˜å…ˆæ‘†åˆ°å°é¢ä¸Šæ¥
- æŠ“å¤§æ”¾å°ï¼Œå…ˆè§£å†³æ–¹å‘é—®é¢˜

è®¡åˆ’ï¼šç»§ç»­æ¨è¿›ææ¡ˆ
äº‰å–åœ¨2022å¹´è¿›å…¥stage 2

æ›´å¤šæ¡ˆä¾‹,
ä»Šåä¼šåœ¨çŸ¥ä¹å’ŒBç«™
é€šè¿‡æ–‡ç« å’Œè§†é¢‘å‘å¸ƒ

æˆæœå¾ˆå¤š
æŒ‘æˆ˜æ›´å¤š

çœŸæ­£å‚ä¸è€…
ä»ç„¶å¾ˆå°‘

- æˆ‘ï¼ˆhaxï¼‰ï¼ŒInvited Expert
- Jack Worksï¼ŒSujiTech
- å´æˆå¿ ï¼ˆååï¼‰ï¼Œé˜¿é‡Œå·´å·´
- ç‹æ–‡ç’ï¼Œå¾®è½¯ä¸­å›½

- SujiTechï¼šæ·±åº¦å‚ä¸ï¼ˆä¸ªäººï¼‰
- é˜¿é‡Œå·´å·´ï¼šæ·±åº¦å‚ä¸ï¼ˆç»„ç»‡ï¼‰
- åä¸ºã€è…¾è®¯ï¼šåŸºæœ¬æ— å‚ä¸
- å­—èŠ‚è·³åŠ¨ï¼šåˆšåŠ å…¥ä¸ä¹…ï¼ˆç»„ç»‡ï¼‰
- 360ï¼š2021å¹´4æœˆä¹‹ååŸºæœ¬æ— å‚ä¸
- æˆ‘ï¼šæ·±åº¦å‚ä¸ï¼ˆä¸ªäººï¼‰

æ—¶åŒº è‹±è¯­
æ„æ„¿ èƒ½åŠ›

æ€•è‡ªå·±è¯¯è§£
æ€•è®²ä¸æ¸…æ¥š
å®³ç¾ã€å®¢æ°”

JS æŠ€æœ¯å¤æ‚åº¦
å†å²åŒ…è¢±å’Œå…¼å®¹æ€§è¦æ±‚
ä¸åŒå¹³å°çš„éœ€æ±‚å†²çª
ä¸åŒæ ‡å‡†ç»„ç»‡çš„åˆ†å·¥
ä¸€äº›ç‰¹æ®Šé™åˆ¶ï¼ˆå¦‚membraneï¼‰
å§”å‘˜ä¼šæœºåˆ¶å’Œæµç¨‹
å…¬å¸å…³ç³»å’Œäººé™…å…³ç³»

ç»„ç»‡æ”¯æŒ
æ—¶é—´ã€ç»©æ•ˆ
é™åˆ¶äº†æ›´å¹¿æ³›
å·¥ç¨‹å¸ˆçš„å‚ä¸

é™åˆ¶äº†èƒ½åŠ›å‘æŒ¥

æ— æ³•é˜»æ­¢å’Œä¿®æ­£
ææ¡ˆçš„ä¸¥é‡é—®é¢˜

- Class fields å¤šä¸ªä¸¥é‡è®¾è®¡å¤±è¯¯
- Top-level await å­˜åœ¨è¾ƒä¸¥é‡çš„å·¥ç¨‹é£é™©
- Hashbang `#!` é¸¡è‚‹ï¼Œæ½œåœ¨ç”Ÿæ€é£é™©
- `#x in o` é¸¡è‚‹
- `Indexed.prototype.at()` é¸¡è‚‹
- JSON modulesã€Module assertions é¸¡è‚‹
- `??` ä¼˜å…ˆçº§ æœ¬å¯é¿å…çš„é—®é¢˜
- Rangeææ¡ˆ Iterator/Iterable ä¸¥é‡åˆ†æ­§

ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ

JS æŠ€æœ¯å¤æ‚åº¦
å†å²åŒ…è¢±å’Œå…¼å®¹æ€§è¦æ±‚
ä¸åŒå¹³å°çš„éœ€æ±‚å†²çª
ä¸åŒæ ‡å‡†ç»„ç»‡çš„åˆ†å·¥
ä¸€äº›ç‰¹æ®Šé™åˆ¶ï¼ˆå¦‚membraneï¼‰
å§”å‘˜ä¼šæœºåˆ¶å’Œæµç¨‹
å…¬å¸å…³ç³»å’Œäººé™…å…³ç³»,
å¼•æ“å‚å•†ä¹‹é—´çš„çŸ›ç›¾
ä»£è¡¨çš„ä¸ªäººåå¥½å’Œå€¾å‘æ€§

è€ä¸€ä»£é¢†è¢–é€€å‡º
æµè§ˆå™¨å‚å•†è¯è¯­æƒè¿‡å¤§
ç¼ºä¹å¼€å‘è€…ä»£è¡¨
éƒ¨åˆ†ä»£è¡¨æœ‰ä¸¥é‡ä¸ªäººåå¥½
ä¼˜å…ˆæ»¡è¶³å§”å‘˜ä¼šå†…éƒ¨

äºº
åˆ¶åº¦

å¿…é¡»æ˜¯ä¼šå‘˜
consensus in the room
ä¸€ç¥¨å¦å†³
ä¼šè®®ä¼˜å…ˆäºä¹¦é¢

TC39çš„åˆ¶åº¦åœ¨
æ ‡å‡†ç»„ç»‡ä¸­æ˜¯
æ¯”è¾ƒç‰¹æ®Šçš„

æµè§ˆå™¨å‚å•†ä¹‹
é—´çš„äº’ç›¸åˆ¶è¡¡

- ç¼ºä¹å›½é™…åŒ–å’ŒåŒ…å®¹æ€§
- ç¼ºä¹å¯¹ç¤¾åŒºçš„å°Šé‡

ä¸­å›½æ˜¯å¸Œæœ›ï¼

å‡èšä¸­å›½å¼€å‘è€…

JSCIG
ä¸­æ–‡è®¨è®ºç»„

[JSCIG/es-discuss/issues](https://github.com/JSCIG/es-discuss/issues)

ä¸­å›½çš„å®ç°è€…
åä¸ºæ–¹èˆŸ
alinode

JS åˆ†æ”¯çš„å¯èƒ½ï¼Ÿ

Thank you!
ä¸€èµ·å‚ä¸ï¼

One more thing...
[ä¸­å›½è®¡ç®—æœºå­¦ä¼šTF43 ç®€æŠ¥](https://johnhax.net/2021/js-cn/slide#72)
[ä¸­å›½è®¡ç®—æœºå­¦ä¼šTF43 å½•åƒ](https://dl.ccf.org.cn/video/videoDetail.html?_ack=1&id=5578915538241536)
